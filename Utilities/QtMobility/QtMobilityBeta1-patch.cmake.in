INCLUDE(@CTK_SOURCE_DIR@/CMake/ctkFunctionLFtoCRLF.cmake)
INCLUDE(@CTK_SOURCE_DIR@/CMake/ctkFunctionApplyPatches.cmake)

SET(patch_dir @qtmobility_patch_dir@)
SET(configured_patch_dir @qtmobility_configured_patch_dir@)

# Variable required to properly configured the patch files
SET(QT_BINARY_DIR @QT_BINARY_DIR@)

SET(patch_files
)

IF(WIN32)
  CONFIGURE_FILE(${patch_dir}/QtMobilityBeta1-win32.patch.in
    ${configured_patch_dir}/QtMobilityBeta1-win32.patch @ONLY)
  LIST(APPEND patch_files
    ${configured_patch_dir}/QtMobilityBeta1-win32.patch
    )
ENDIF()

IF(UNIX)
  CONFIGURE_FILE(${patch_dir}/QtMobilityBeta1-unix.patch.in
    ${configured_patch_dir}/QtMobilityBeta1-unix.patch @ONLY)
  LIST(APPEND patch_files
    ${configured_patch_dir}/QtMobilityBeta1-unix.patch)
  IF(APPLE)
    LIST(APPEND patch_files ${patch_dir}/QtMobilityBeta1-apple.patch)
  ENDIF()
ENDIF()

# Apply patches
ctkFunctionApplyPatches("@CTK_PATCH_EXECUTABLE@" "@qtmobility_src_dir@" "${patch_files}")
